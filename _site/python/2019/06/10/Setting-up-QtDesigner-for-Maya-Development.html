<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1 maximum-scale=1; minimum-scale=1; user-scalable=no;"> <meta name="author" content="ChengGu"> <meta name="baseurl" content=""> <title> Suzuka Site|Connect QtDesigner to Maya Development </title> <!-- favicon --> <link rel="shortcut icon" href="/static/assets/img/favicon.ico"> <!-- Main CSS --> <link href="/static/assets/app-20180125.min.css" rel="stylesheet"> <link href="/static/css/custom.css" rel="stylesheet"> <!-- Main Scripts --> <script src="/static/assets/app-20180125.min.js"></script> <script src="/static/assets/blog-20180125.min.js"></script> <!-- Google AdSense --> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <script> (adsbygoogle = window.adsbygoogle || []).push({ google_ad_client: "ca-pub-6196184668650108", enable_page_level_ads: true }); </script> </head> <body id="page-top" class="landing-page"> <div class="search-tool" style="position: fixed; top: 0px ; bottom: 0px; left: 0px; right: 0px; opacity: 0.95; background-color: #111111; z-index: 9999; display: none;"> <input type="text" class="form-control search-content" id="search-content" style="position: fixed; top: 60px" placeholder="Search Blog"> <div style="position: fixed; top: 16px; right: 16px; z-index: 9999;"> <img src=" /static/assets/img/search/cb-close.png " id="close-btn" /> </div> </div> <div style="position: fixed; right: 16px; bottom: 20px; z-index: 9999;"> <img src=" /static/assets/img/search/cb-search.png " id="search-btn" title="Double click Ctrl" /> </div> <div class="navbar-wrapper"> <nav class="navbar navbar-default navbar-fixed-top" role="navigation"> <div class="container"> <div class="navbar-header page-scroll"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href=" / ">Suzuka Site</a> </div> <div id="navbar" class="navbar-collapse collapse"> <ul class="nav navbar-nav navbar-right"> <li><a class="page-scroll" href=" blog/ "></a></li> <li> <a class="page-scroll" href="/blog/">Blog</a></li> <li> <a class="page-scroll" href="/unity/">Unity</a></li> <li> <a class="page-scroll" href="/ai/">AI</a></li> <li> <a class="page-scroll" href="/cg/">CG</a></li> <li> <a class="page-scroll" href="/math/">Math</a></li> <li> <a class="page-scroll" href="/data structure/">Data Structure</a></li> <li> <a class="page-scroll" href="/csharp/">C#</a></li> <li> <a class="page-scroll" href="/python/">Python</a></li> <li> <a class="page-scroll" href="/javascript/">JavaScript</a></li> <li> <a class="page-scroll" href="/game dev/">Game Dev</a></li> </ul> </div> </div> </nav> </div> <!--<link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css'>--> <!--<link rel="stylesheet" href="static/css/carousel_style.css">--> <!--<script src="static/js/carousel.js"></script>--> <div id="carouselHacked" class="carousel slide carousel-fade" data-ride="carousel"> <div class="carousel-inner" role="listbox"> <div class="item active"> <!-- Set background for slide in css --> <div class="header-back" style="background-image: url(/static/assets/img/landing/header_1.jpg);" title="first banner image"> </div> </div> <div class="item"> <div class="header-back" style="background-image: url(/static/assets/img/landing/header_2.jpg);" title=""> </div> </div> <div class="item"> <div class="header-back" style="background-image: url(/static/assets/img/landing/header_3.jpg);" title="third banner image"> </div> </div> <div class="item"> <div class="header-back" style="background-image: url(/static/assets/img/landing/header_4.jpg);" title="fourth banner image"> </div> </div> <div class="item"> <div class="header-back" style="background-image: url(/static/assets/img/landing/header_5.jpg);" title="fifth banner image"> </div> </div> <div class="item"> <div class="header-back" style="background-image: url(/static/assets/img/landing/header_6.jpg);" title="sixth banner image"> </div> </div> </div> <!-- Controls --> <a class="left carousel-control" href="#carouselHacked" role="button" data-slide="prev"> <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span> <span class="sr-only">Previous</span> </a> <a class="right carousel-control" href="#carouselHacked" role="button" data-slide="next"> <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> <span class="sr-only">Next</span> </a> </div> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']], processEscapes: true } }); </script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script> <div class="wrapper wrapper-content animated fadeInRight article"> <div class="row"> <div class="col-lg-10 col-lg-offset-1"> <div class="ibox"> <div class="ibox-content"> <div class="pull-right"> <a class="btn btn-white btn-xs" href="/python">Python</a> </div> <div class="text-center article-title"> <span class="text-muted"><i class="fa fa-clock-o"></i> 10 Jun 2019</span> <h1> Connect QtDesigner to Maya Development </h1> </div> <div class="ibox-postpadding"> <h1 id="1-download-the-qtdesigner-mac-version">1. Download the QtDesigner Mac version</h1> <ul> <li><a href="https://build-system.fman.io/qt-designer-download">Download Link</a> <br /></li> </ul> <h1 id="2-open-qtdesigner-to-edit-the-uis">2. Open QtDesigner to Edit the UIs</h1> <p><br /></p> <h1 id="3-after-saving-qt-designer-will-output-a-file-with-the-ui-suffix">3. After saving, Qt Designer will output a file with the <code class="highlighter-rouge">.ui</code> suffix.</h1> <p><br /></p> <h1 id="4-run-the-following-command-in-terminal-based-on-the-operating-system-to-get-the-python-file">4. Run the Following Command in Terminal based on the Operating System to get the python file</h1> <ul> <li>Mac: /Applications/Autodesk/maya2019/Maya.app/Contents/bin/pyside2-uic /Users/<username>/Desktop/qtdesigner_test.ui -o /Users/<username>/Desktop/qtdesigner_test.py <br /></username></username></li> <li>Windows: C:\Program Files\Autodesk\Maya2019\bin mayapy.exe pyside2-uic d:\Users\guche\Desktop\test.ui -o d:\Users\guche\Desktop\test.py <br /><br /></li> </ul> <h1 id="5-create-a-python-sciprt-as-below-and-import-it-in-maya-script-editor-to-test-result">5. Create a python sciprt as below, and import it in maya script editor to test result</h1> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">test_ui</span> <span class="kn">import</span> <span class="o">&lt;</span><span class="n">class_name</span><span class="o">&gt;</span>
<span class="kn">from</span> <span class="nn">PySide2.QtGui</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">PySide2.QtWidgets</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">PySide2.QtCore</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">window</span><span class="p">(</span><span class="o">&lt;</span><span class="n">class_name</span><span class="o">&gt;</span><span class="p">,</span><span class="n">QWidget</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># 执行 QWidget 的 __init__ </span>
        <span class="nb">super</span><span class="p">(</span><span class="n">window</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s">u"Test Window"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        
<span class="n">win</span> <span class="o">=</span> <span class="n">window</span><span class="p">()</span>

</code></pre></div></div> <p><a name="1"></a></p> <p><br /><br /></p> <hr /> <p><br /><br /></p> <h1 id="1-creating-a-simple-window-ui-in-maya">1. Creating a Simple Window UI in Maya</h1> <p><br /></p> <h2 id="creating-a-window-through-mel">Creating a Window through <code class="highlighter-rouge">MEL</code></h2> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">string</span> <span class="err">$</span><span class="n">win</span> <span class="o">=</span> <span class="sb">`window "Simple Window"`</span><span class="p">;</span>
<span class="n">showWindow</span> <span class="err">$</span><span class="n">win</span><span class="p">;</span>
</code></pre></div></div> <h2 id="creating-a-window-through-mayacmd">Creating a Window through <code class="highlighter-rouge">maya.cmd</code></h2> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">maya</span> <span class="kn">import</span> <span class="n">cmds</span>

<span class="n">win</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">window</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="s">"Simple Window"</span><span class="p">,</span><span class="n">widthHeight</span> <span class="o">=</span> <span class="p">(</span><span class="mi">300</span><span class="p">,</span><span class="mi">200</span><span class="p">))</span>
<span class="n">cmds</span><span class="o">.</span><span class="n">showWindow</span><span class="p">(</span><span class="n">win</span><span class="p">)</span>

</code></pre></div></div> <h2 id="creating-a-window-through-openmaya-api--pyside2">Creating a Window through <code class="highlighter-rouge">OpenMaya API &amp; PySide2</code></h2> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">PySide2</span> <span class="kn">import</span> <span class="n">QtCore</span><span class="p">,</span> <span class="n">QtWidgets</span>
<span class="kn">from</span> <span class="nn">shiboken2</span> <span class="kn">import</span> <span class="n">wrapInstance</span>

<span class="kn">import</span> <span class="nn">maya.OpenMayaUI</span> <span class="k">as</span> <span class="n">omui</span>

<span class="k">def</span> <span class="nf">mayaWindow</span><span class="p">():</span>
	<span class="n">main_window_ptr</span> <span class="o">=</span> <span class="n">omui</span><span class="o">.</span><span class="n">MQtUtil</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">()</span>
	<span class="k">return</span> <span class="n">wrapInstance</span><span class="p">(</span><span class="nb">long</span><span class="p">(</span><span class="n">main_window_ptr</span><span class="p">),</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QWidget</span><span class="p">)</span>
	
<span class="k">class</span> <span class="nc">TestWindow</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QDialog</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parent</span><span class="o">=</span><span class="n">mayaWindow</span><span class="p">()):</span>
		<span class="nb">super</span><span class="p">(</span><span class="n">TestWindow</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
		
		<span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s">"Test Dialog"</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">250</span><span class="p">)</span>
		<span class="c"># make sure the window is overlay the maya</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setWindowFlags</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">windowFlags</span><span class="p">()</span> <span class="o">|</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">WindowStaysOnTopHint</span><span class="p">)</span>
		
		
<span class="c"># make sure the code will only run when this is the main file</span>
<span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="s">"__main__"</span><span class="p">:</span>
	<span class="n">d</span> <span class="o">=</span> <span class="n">TestWindow</span><span class="p">()</span>
	<span class="n">d</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div> <p><a name="2"></a></p> <p><br /><br /></p> <hr /> <p><br /><br /></p> <h1 id="2-creating-a-maya-workspacecontrol-window">2. Creating a Maya WorkSpaceControl Window</h1> <p><br /></p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">PySide2</span> <span class="kn">import</span> <span class="n">QtCore</span><span class="p">,</span> <span class="n">QtWidgets</span>
<span class="kn">from</span> <span class="nn">shiboken2</span> <span class="kn">import</span> <span class="n">wrapInstance</span>

<span class="kn">import</span> <span class="nn">maya.OpenMayaUI</span> <span class="k">as</span> <span class="n">omui</span>

<span class="kn">from</span> <span class="nn">maya</span> <span class="kn">import</span> <span class="n">cmds</span>


<span class="k">def</span> <span class="nf">getDock</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'TestWorkspace'</span><span class="p">):</span>
    <span class="n">deleteDock</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="c"># firstly, delete the Dock</span>
    <span class="c"># Create a tab window(dock) in maya</span>
    <span class="n">ctrl</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">workspaceControl</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">label</span> <span class="o">=</span> <span class="s">"Window Test"</span><span class="p">)</span>

    <span class="n">qtCtrl</span> <span class="o">=</span> <span class="n">omui</span><span class="o">.</span><span class="n">MQtUtil_findControl</span><span class="p">(</span><span class="n">ctrl</span><span class="p">)</span>
    <span class="n">ptr</span> <span class="o">=</span> <span class="n">wrapInstance</span><span class="p">(</span><span class="nb">long</span><span class="p">(</span><span class="n">qtCtrl</span><span class="p">),</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QWidget</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ptr</span>
    
<span class="k">def</span> <span class="nf">deleteDock</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"LightingManagerDock"</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">cmds</span><span class="o">.</span><span class="n">workspaceControl</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">query</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">exists</span> <span class="o">=</span> <span class="bp">True</span><span class="p">):</span>
        <span class="n">cmds</span><span class="o">.</span><span class="n">deleteUI</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        
        
<span class="c"># Run function to get the window</span>
<span class="n">getDock</span><span class="p">()</span>
</code></pre></div></div> <p><a name="3"></a> <br /><br /></p> <hr /> <p><br /><br /> <a name="3.1"></a></p> <h1 id="3-creating-ui-elements-in-maya-through-mayacmds">3. Creating UI elements in Maya (Through <code class="highlighter-rouge">maya.cmds</code>)</h1> <p><br /></p> <h2 id="creating-a-simple-button">Creating a Simple <a href="https://help.autodesk.com/cloudhelp/2018/ENU/Maya-Tech-Docs/CommandsPython/button.html"><strong>Button</strong></a></h2> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">maya</span> <span class="kn">import</span> <span class="n">cmds</span>

<span class="k">def</span> <span class="nf">buttonAction</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
  <span class="k">print</span><span class="p">(</span><span class="s">"Button is pressed"</span><span class="p">)</span>
  
<span class="k">def</span> <span class="nf">showUI</span><span class="p">():</span>
  <span class="n">win</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">window</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">"Button Event"</span><span class="p">,</span> <span class="n">widthHeight</span> <span class="o">=</span> <span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">))</span>
  <span class="n">cmds</span><span class="o">.</span><span class="n">columnLayout</span><span class="p">()</span>
  <span class="n">cmds</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">"My Button"</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="n">buttonAction</span><span class="p">)</span>
  <span class="n">cmds</span><span class="o">.</span><span class="n">showWindow</span><span class="p">(</span><span class="n">win</span><span class="p">)</span>
  
<span class="n">showUI</span><span class="p">()</span>
</code></pre></div></div> <p><a name="3.2"></a></p> <p><br /><br /></p> <h2 id="retrieve-input-from-intfield--floatfield">Retrieve Input from <a href="https://help.autodesk.com/cloudhelp/2018/ENU/Maya-Tech-Docs/CommandsPython/show.html?intField.html&amp;cat=Windows"><strong>intField</strong></a> | <a href="https://help.autodesk.com/cloudhelp/2018/ENU/Maya-Tech-Docs/CommandsPython/show.html?floatField.html&amp;cat=Windows"><strong>floatField</strong></a></h2> <p>Sometimes we also need to grab input from field controls, in both integet and float varieties.</p> <p>The below script is to create spheres by grabing the input field.</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">SpheresClass</span><span class="p">():</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">win</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">window</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">"Make Spheres"</span><span class="p">,</span><span class="n">widthHeight</span><span class="o">=</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span><span class="mi">200</span><span class="p">))</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">columnLayout</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">numSpheres</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">intField</span><span class="p">(</span><span class="n">minValue</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">"Make Spheres"</span><span class="p">,</span><span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">makeSpheres</span><span class="p">)</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">showWindow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">win</span><span class="p">)</span>
  <span class="k">def</span> <span class="nf">makeSpheres</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="n">number</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">intField</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">numSpheres</span><span class="p">,</span><span class="n">query</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">value</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">number</span><span class="p">):</span>
      <span class="n">cmds</span><span class="o">.</span><span class="n">polySphere</span><span class="p">()</span>
      <span class="n">cmds</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">i</span><span class="o">*</span><span class="mf">2.2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
      
<span class="n">SpheresClass</span><span class="p">()</span>
</code></pre></div></div> <p><a name="3.3"></a></p> <p><br /><br /></p> <h2 id="using-nested-layout-to-add-text-before-the-input-field">Using Nested Layout to Add <a href="https://help.autodesk.com/cloudhelp/2018/ENU/Maya-Tech-Docs/CommandsPython/show.html?text.html&amp;cat=Windows"><strong>text</strong></a> Before the Input Field</h2> <p>Many times, we will want to create organized UI Layout, we need to nest layouts inside each other.</p> <p>The following example shows using <a href="https://help.autodesk.com/cloudhelp/2018/ENU/Maya-Tech-Docs/CommandsPython/show.html?rowLayout.html&amp;cat=Windows"><strong>rowLayouts</strong></a> within a single <a href="https://help.autodesk.com/cloudhelp/2018/ENU/Maya-Tech-Docs/CommandsPython/show.html?columnLayout.html&amp;cat=Windows"><strong>columnLayout</strong></a> to add label before the input field.</p> <p><br /></p> <p align="center"> <img src="/static/assets/img/blog/cmd-nested-layout.png" width="30%" /> </p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">maya</span> <span class="kn">import</span> <span class="n">cmds</span>

<span class="k">class</span> <span class="nc">NestedLayouts</span><span class="p">():</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">win</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">window</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">"Nested Layouts"</span><span class="p">,</span> <span class="n">widthHeight</span><span class="o">=</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span><span class="mi">200</span><span class="p">))</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">columnLayout</span><span class="p">()</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">rowLayout</span><span class="p">(</span><span class="n">numberOfColumns</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">"input One:"</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">inputOne</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">intField</span><span class="p">()</span>
    
    <span class="c"># in order to continue to add out UI, we have you use `cmds.setParent("..")`  </span>
    <span class="c"># to back to the previous layout, which is the column layout</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">setParent</span><span class="p">(</span><span class="s">".."</span><span class="p">)</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">rowLayout</span><span class="p">(</span><span class="n">numberOfColumns</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">"Input Two:"</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">inputTwo</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">intField</span><span class="p">()</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">setParent</span><span class="p">(</span><span class="s">".."</span><span class="p">)</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">showWindow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">win</span><span class="p">)</span>

<span class="n">NestedLayouts</span><span class="p">()</span>
</code></pre></div></div> <p><a name="3.4"></a></p> <p><br /><br /></p> <h2 id="using-tabs-and-scrolling">Using <a href="https://help.autodesk.com/cloudhelp/2018/ENU/Maya-Tech-Docs/CommandsPython/show.html?tabLayout.html&amp;cat=Windows"><strong>Tabs</strong></a> and <a href="https://help.autodesk.com/cloudhelp/2018/ENU/Maya-Tech-Docs/CommandsPython/show.html?scrollLayout.html&amp;cat=Windows"><strong>Scrolling</strong></a></h2> <p><br /></p> <p align="center"> <img src="/static/assets/img/blog/cmd-tab-and-scrolling.png" width="70%" /> </p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">maya</span> <span class="kn">import</span> <span class="n">cmds</span>

<span class="k">class</span> <span class="nc">TabExample</span><span class="p">():</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">win</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">window</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="s">"Tabbed Layout"</span><span class="p">,</span><span class="n">widthHeight</span> <span class="o">=</span> <span class="p">(</span><span class="mi">300</span><span class="p">,</span><span class="mi">300</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">tabLayout</span><span class="p">()</span>
    
    <span class="c"># add first tab</span>
    <span class="n">firstTab</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">columnLayout</span><span class="p">()</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">tabLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="p">,</span><span class="n">edit</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">tabLabel</span><span class="o">=</span><span class="p">[</span><span class="n">firstTab</span><span class="p">,</span><span class="s">'Simple Tab'</span><span class="p">])</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">"Button"</span><span class="p">)</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">setParent</span><span class="p">(</span><span class="s">".."</span><span class="p">)</span>
    
    <span class="c"># add the second tab, and setup scrolling</span>
    <span class="n">scroll</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">scrollLayout</span><span class="p">()</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">tabLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="p">,</span><span class="n">edit</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">tabLabel</span><span class="o">=</span><span class="p">[</span><span class="n">scroll</span><span class="p">,</span><span class="s">'Scrolling Tab'</span><span class="p">])</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">columnLayout</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span>
      <span class="n">cmds</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">'Button '</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">setParent</span><span class="p">(</span><span class="s">".."</span><span class="p">)</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">setParent</span><span class="p">(</span><span class="s">".."</span><span class="p">)</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">showWindow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">win</span><span class="p">)</span>
<span class="n">TabExample</span><span class="p">()</span>
</code></pre></div></div> <blockquote> <p><strong><code class="highlighter-rouge">selectTabIndex</code> can help you get the info of the currently selected tab</strong></p> <p><code class="highlighter-rouge">currTab = cmds.tabLayout(self.tabs,query=True,selectTabIndex = True)</code></p> <p><strong>Use selectTabIndex to set which tab is currently actice</strong></p> <p><code class="highlighter-rouge">cmds.tabLayout(self.tabs,edit = True,selectTabIndex=2)</code></p> </blockquote> <p><a name="3.5"></a></p> <p><br /><br /></p> <h2 id="working-with-menu-and-menuitem">Working with <a href="https://help.autodesk.com/cloudhelp/2018/ENU/Maya-Tech-Docs/CommandsPython/show.html?menu.html&amp;cat=Windows">Menu</a> and <a href="https://help.autodesk.com/cloudhelp/2018/ENU/Maya-Tech-Docs/CommandsPython/show.html?menuItem.html&amp;cat=Windows">MenuItem</a></h2> <p><br /></p> <p align="center"> <img src="/static/assets/img/blog/cmds-menus.png" width="30%" /> </p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">maya</span> <span class="kn">import</span> <span class="n">cmds</span>

<span class="k">class</span> <span class="nc">CustomMenu</span><span class="p">:</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">win</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">window</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">"Menu Example"</span><span class="p">,</span> <span class="n">menuBar</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">widthHeight</span> <span class="o">=</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span><span class="mi">200</span><span class="p">))</span>
    <span class="n">fileMenu</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">menu</span><span class="p">(</span><span class="n">label</span> <span class="o">=</span><span class="s">"File"</span><span class="p">)</span>
    <span class="n">loadOption</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">menuItem</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">"Load"</span><span class="p">)</span>
    <span class="n">saveOption</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">menuItem</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">"Save"</span><span class="p">)</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">setParent</span><span class="p">(</span><span class="s">".."</span><span class="p">)</span>
    
    <span class="n">objectsMenu</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">menu</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">"Objects"</span><span class="p">)</span>
    <span class="n">sphereMI</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">menuItem</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">"Make Sphere"</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sphereCommand</span><span class="p">)</span>
    <span class="n">sphereOption</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">menuItem</span><span class="p">(</span><span class="n">optionBox</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span><span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sphereCommandOptions</span><span class="p">)</span>
    <span class="n">cubeOption</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">menuItem</span><span class="p">(</span><span class="n">label</span> <span class="o">=</span> <span class="s">"Make Cube"</span><span class="p">,</span><span class="n">command</span> <span class="o">=</span> <span class="s">"cmds.headsUpMessage('Lets make cube')"</span><span class="p">)</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">setParent</span><span class="p">(</span><span class="s">".."</span><span class="p">)</span>
    
    <span class="n">cmds</span><span class="o">.</span><span class="n">columnLayout</span><span class="p">()</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">label</span> <span class="o">=</span> <span class="s">"Put the rest of yout interface here"</span><span class="p">)</span>
    
    <span class="n">cmds</span><span class="o">.</span><span class="n">showWindow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">win</span><span class="p">)</span>
  
  <span class="k">def</span> <span class="nf">sphereCommand</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">makeSphere</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
  <span class="k">def</span> <span class="nf">sphereCommandOptions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="n">promptInput</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">promptDialog</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="s">"SphereRadius"</span><span class="p">,</span><span class="n">message</span><span class="o">=</span><span class="s">"Specify Radius: "</span><span class="p">,</span> <span class="n">button</span><span class="o">=</span><span class="p">[</span><span class="s">'OK'</span><span class="p">,</span><span class="s">'CANCEL'</span><span class="p">],</span> <span class="n">defaultButton</span> <span class="o">=</span> <span class="s">'OK'</span><span class="p">,</span><span class="n">cancelButton</span> <span class="o">=</span> <span class="s">'CANCEL'</span><span class="p">,</span><span class="n">dismissString</span><span class="o">=</span><span class="s">'CANCEL'</span><span class="p">)</span>
    
    <span class="k">if</span><span class="p">(</span><span class="n">promptInput</span> <span class="o">==</span> <span class="s">'OK'</span><span class="p">):</span>
      <span class="n">radiusInput</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">promptDialog</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">makeSphere</span><span class="p">(</span><span class="n">radiusInput</span><span class="p">)</span>
  
  <span class="k">def</span> <span class="nf">makeSphere</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">r</span><span class="p">):</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">polySphere</span><span class="p">(</span><span class="n">radius</span> <span class="o">=</span> <span class="n">r</span><span class="p">)</span>
  <span class="k">def</span> <span class="nf">makeCube</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">polyCube</span><span class="p">()</span>
    
<span class="n">CustomMenu</span><span class="p">()</span>
</code></pre></div></div> <p><a name="4"></a></p> <p><br /><br /></p> <hr /> <p><br /><br /> <a name="4.1"></a></p> <h1 id="4-creating-ui-elements-in-maya-through-pyqt5pyside2">4. Creating UI elements in Maya (Through <code class="highlighter-rouge">PyQt5/PySide2</code>)</h1> <p><br /></p> <h2 id="pushbutton"><a href="https://doc.qt.io/qtforpython/PySide2/QtWidgets/QPushButton.html"><strong>PushButton</strong></a></h2> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">PySide2</span> <span class="kn">import</span> <span class="n">QtCore</span><span class="p">,</span> <span class="n">QtWidgets</span>
<span class="kn">from</span> <span class="nn">shiboken2</span> <span class="kn">import</span> <span class="n">wrapInstance</span>

<span class="kn">import</span> <span class="nn">maya.OpenMayaUI</span> <span class="k">as</span> <span class="n">omui</span>

<span class="k">def</span> <span class="nf">mayaWindow</span><span class="p">():</span>
	<span class="n">main_window_ptr</span> <span class="o">=</span> <span class="n">omui</span><span class="o">.</span><span class="n">MQtUtil</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">()</span>
	<span class="k">return</span> <span class="n">wrapInstance</span><span class="p">(</span><span class="nb">long</span><span class="p">(</span><span class="n">main_window_ptr</span><span class="p">),</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QWidget</span><span class="p">)</span>
	
<span class="k">class</span> <span class="nc">TestWindow</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QDialog</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parent</span><span class="o">=</span><span class="n">mayaWindow</span><span class="p">()):</span>
		<span class="nb">super</span><span class="p">(</span><span class="n">TestWindow</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
		
		<span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s">"Test Dialog"</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">250</span><span class="p">)</span>
		<span class="c"># make sure the window is overlay the maya</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setWindowFlags</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">windowFlags</span><span class="p">()</span> <span class="o">|</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">WindowStaysOnTopHint</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">buildUI</span><span class="p">()</span>
		
	<span class="k">def</span> <span class="nf">buildUI</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">btn</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s">"Test Button"</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span>
		<span class="n">btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buttonAction</span><span class="p">)</span>
		
		
	<span class="k">def</span> <span class="nf">buttonAction</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
		<span class="k">print</span><span class="p">(</span><span class="s">"Test Btn"</span><span class="p">)</span>
<span class="c"># make sure the code will only run when this is the main file</span>
<span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="s">"__main__"</span><span class="p">:</span>
	<span class="n">d</span> <span class="o">=</span> <span class="n">TestWindow</span><span class="p">()</span>
	<span class="n">d</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div> <p><a name="5"></a></p> <p><br /><br /></p> <hr /> <p><br /><br /></p> <hr /> <blockquote> <p><strong>End –Cheng Gu</strong></p> </blockquote> </div> <hr> <div class="row"> <div class="col-md-6"> <h5 style="display: inline;">Tags:</h5> <button class="btn btn-white btn-xs" type="button">Python</button> </div> <div class="col-md-6"> <div class="small text-right"> <div> </div> </div> </div> </div> <br> <div class="row"> <div class="col-lg-12"> <!-- donate --> <br> <!-- share --> <div class="a2a_kit a2a_kit_size_32 a2a_default_style"> <a class="a2a_dd" href="https://www.addtoany.com/share"></a> <a class="a2a_button_facebook"></a> <a class="a2a_button_twitter"></a> <a class="a2a_button_google_plus"></a> <a class="a2a_button_linkedin"></a> <a class="a2a_button_email"></a> <a class="a2a_button_wechat"></a> <a class="a2a_button_sina_weibo"></a> <a class="a2a_button_pocket"></a> </div> <script> var a2a_config = a2a_config || {}; a2a_config.color_main = "D7E5ED"; a2a_config.color_border = "AECADB"; a2a_config.color_link_text = "333333"; a2a_config.color_link_text_hover = "333333"; </script> <script async src="https://static.addtoany.com/menu/page.js"></script> <br> <!-- comment --> </div> </div> </div> </div> </div> </div> </div> <!-- Google analytics --> <!-- GrowingIO --> </body> </html>
