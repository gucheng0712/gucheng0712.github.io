<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1 maximum-scale=1; minimum-scale=1; user-scalable=no;"> <meta name="author" content="ChengGu"> <meta name="baseurl" content=""> <title> Suzuka Site|Mayascripting working with geometry </title> <!-- favicon --> <link rel="shortcut icon" href="/static/assets/img/favicon.ico"> <!-- Main CSS --> <link href="/static/assets/app-20180125.min.css" rel="stylesheet"> <link href="/static/css/custom.css" rel="stylesheet"> <!-- Main Scripts --> <script src="/static/assets/app-20180125.min.js"></script> <script src="/static/assets/blog-20180125.min.js"></script> <!-- Google AdSense --> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <script> (adsbygoogle = window.adsbygoogle || []).push({ google_ad_client: "ca-pub-6196184668650108", enable_page_level_ads: true }); </script> </head> <body id="page-top" class="landing-page"> <div class="search-tool" style="position: fixed; top: 0px ; bottom: 0px; left: 0px; right: 0px; opacity: 0.95; background-color: #111111; z-index: 9999; display: none;"> <input type="text" class="form-control search-content" id="search-content" style="position: fixed; top: 60px" placeholder="Search Blog"> <div style="position: fixed; top: 16px; right: 16px; z-index: 9999;"> <img src=" /static/assets/img/search/cb-close.png " id="close-btn" /> </div> </div> <div style="position: fixed; right: 16px; bottom: 20px; z-index: 9999;"> <img src=" /static/assets/img/search/cb-search.png " id="search-btn" title="Double click Ctrl" /> </div> <div class="navbar-wrapper"> <nav class="navbar navbar-default navbar-fixed-top" role="navigation"> <div class="container"> <div class="navbar-header page-scroll"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href=" / ">Suzuka Site</a> </div> <div id="navbar" class="navbar-collapse collapse"> <ul class="nav navbar-nav navbar-right"> <li><a class="page-scroll" href=" blog/ "></a></li> <li> <a class="page-scroll" href="/blog/">Blog</a></li> <li> <a class="page-scroll" href="/unity/">Unity</a></li> <li> <a class="page-scroll" href="/ai/">AI</a></li> <li> <a class="page-scroll" href="/cg/">CG</a></li> <li> <a class="page-scroll" href="/math/">Math</a></li> <li> <a class="page-scroll" href="/data structure/">Data Structure</a></li> <li> <a class="page-scroll" href="/csharp/">C#</a></li> <li> <a class="page-scroll" href="/python/">Python</a></li> <li> <a class="page-scroll" href="/javascript/">JavaScript</a></li> <li> <a class="page-scroll" href="/game dev/">Game Dev</a></li> </ul> </div> </div> </nav> </div> <!--<link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css'>--> <!--<link rel="stylesheet" href="static/css/carousel_style.css">--> <!--<script src="static/js/carousel.js"></script>--> <div id="carouselHacked" class="carousel slide carousel-fade" data-ride="carousel"> <div class="carousel-inner" role="listbox"> <div class="item active"> <!-- Set background for slide in css --> <div class="header-back" style="background-image: url(/static/assets/img/landing/header_1.jpg);" title="first banner image"> </div> </div> <div class="item"> <div class="header-back" style="background-image: url(/static/assets/img/landing/header_2.jpg);" title=""> </div> </div> <div class="item"> <div class="header-back" style="background-image: url(/static/assets/img/landing/header_3.jpg);" title="third banner image"> </div> </div> <div class="item"> <div class="header-back" style="background-image: url(/static/assets/img/landing/header_4.jpg);" title="fourth banner image"> </div> </div> <div class="item"> <div class="header-back" style="background-image: url(/static/assets/img/landing/header_5.jpg);" title="fifth banner image"> </div> </div> <div class="item"> <div class="header-back" style="background-image: url(/static/assets/img/landing/header_6.jpg);" title="sixth banner image"> </div> </div> </div> <!-- Controls --> <a class="left carousel-control" href="#carouselHacked" role="button" data-slide="prev"> <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span> <span class="sr-only">Previous</span> </a> <a class="right carousel-control" href="#carouselHacked" role="button" data-slide="next"> <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> <span class="sr-only">Next</span> </a> </div> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']], processEscapes: true } }); </script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script> <div class="wrapper wrapper-content animated fadeInRight article"> <div class="row"> <div class="col-lg-10 col-lg-offset-1"> <div class="ibox"> <div class="ibox-content"> <div class="pull-right"> </div> <div class="text-center article-title"> <span class="text-muted"><i class="fa fa-clock-o"></i> 20 Jun 2019</span> <h1> Mayascripting working with geometry </h1> </div> <div class="ibox-postpadding"> <hr /> <p>layout: post title: “Creating User Interface in Maya” date: 2019-06-01 categories: [Python] tags: [Python] icon: fa-code —</p> <h1 id="table-of-contents">Table of Contents</h1> <h3 id="1-check-selections--type">1. <a href="#1"><strong>Check Selections &amp; Type</strong></a></h3> <h3 id="2-access-geometry-data">2. <a href="#2"><strong>Access Geometry Data</strong></a></h3> <h3 id="3-creating-curve--primitive">3. <a href="#3"><strong>Creating Curve &amp; Primitive</strong></a></h3> <p><a name="1"></a></p> <p><br /><br /></p> <hr /> <p><br /><br /></p> <h1 id="1-check-selections--type-1">1. Check Selections &amp; Type</h1> <p>One of the most commonly used command in maya.cmds API is <a href="http://help.autodesk.com/cloudhelp/2017/ENU/Maya-Tech-Docs/Commands/ls.html">cmds.ls()</a>, this command will return a list that contains all objects in the scene.</p> <p>We can list the selected object by set the <code class="highlighter-rouge">selection</code> flag to True, as belows:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cmds</span><span class="o">.</span><span class="n">ls</span><span class="p">(</span><span class="n">selection</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div></div> <p>When we want to check the type of the object. For example, we want to know if the object is a <code class="highlighter-rouge">mesh</code> type, we can do by using <a href="https://download.autodesk.com/us/maya/2011help/CommandsPython/listRelatives.html">cmds.listRelatives()</a> and <a href="https://help.autodesk.com/cloudhelp/2018/ENU/Maya-Tech-Docs/Commands/nodeType.html">cmds.nodeType()</a> as following:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># get the shape of the object</span>
<span class="n">shapeNode</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">listRelatives</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">shapes</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c"># get the node type through shape</span>
<span class="n">nodeType</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">nodeType</span><span class="p">(</span><span class="n">shapeNode</span><span class="p">)</span>

<span class="c"># if the type is "mesh", return true</span>
<span class="k">if</span> <span class="n">nodeType</span> <span class="o">==</span> <span class="s">"mesh"</span><span class="p">:</span>
  <span class="k">return</span> <span class="bp">True</span>
</code></pre></div></div> <p><a name="2"></a></p> <p><br /><br /></p> <hr /> <p><br /><br /></p> <h1 id="2-access-geometry-data-1">2. Access Geometry Data</h1> <p><br /></p> <h2 id="data-in-polygon-model">Data in Polygon Model</h2> <p>If we want to get the counts on the specified object <a href="http://download.autodesk.com/us/maya/2011help/CommandsPython/polyEvaluate.html">cmds.polyEvaluate()</a>. For example, do as following to get the number of vertices, edges, and faces:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">vertNum</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">polyEvaluate</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">vertex</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">edgeNum</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">polyEvaluate</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">edge</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">faceNum</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">polyEvaluate</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">face</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div></div> <p>Sometimes we want to get the reference from the specific vertex, edge, or face. The following code shows to select the specific vertex, edge, and face by using <a href="http://help.autodesk.com/cloudhelp/2015/ENU/Maya-Tech-Docs/CommandsPython/select.html">cmds.select</a></p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cmds</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">obj</span><span class="o">+</span><span class="s">".vtx[0]"</span><span class="p">,</span><span class="n">replace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">cmds</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">obj</span><span class="o">+</span><span class="s">".e[1:5]"</span><span class="p">,</span><span class="n">replace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">cmds</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">obj</span><span class="o">+</span><span class="s">".f[-1]"</span><span class="p">,</span><span class="n">replace</span><span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
</code></pre></div></div> <h2 id="data-in-nurbs-object">Data in Nurbs Object</h2> <p>Using <a href="http://help.autodesk.com/cloudhelp/2017/ENU/Maya-Tech-Docs/CommandsPython/getAttr.html">cmds.getAttr()</a> to retrieve the value of specified attribute on a given node.</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">degU</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">getAttr</span><span class="p">(</span><span class="n">obj</span><span class="o">+</span><span class="s">".degreeU"</span><span class="p">)</span>
  <span class="n">spansU</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">getAttr</span><span class="p">(</span><span class="n">obj</span><span class="o">+</span><span class="s">".spansU"</span><span class="p">)</span>
  <span class="n">cvsU</span> <span class="o">=</span> <span class="n">degU</span><span class="o">+</span><span class="n">spansU</span>
  <span class="k">print</span><span class="p">(</span><span class="s">"CVs (U): </span><span class="si">%</span><span class="s">s"</span><span class="o">%</span><span class="n">cvsU</span><span class="p">)</span>
  
  <span class="n">degV</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">getAttr</span><span class="p">(</span><span class="n">obj</span><span class="o">+</span><span class="s">".degreeV"</span><span class="p">)</span>
  <span class="n">spansV</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">getAttr</span><span class="p">(</span><span class="n">obj</span><span class="o">+</span><span class="s">".spansV"</span><span class="p">)</span>
  <span class="n">cvsV</span> <span class="o">=</span> <span class="n">degV</span><span class="o">+</span><span class="n">spansV</span>
  <span class="k">print</span><span class="p">(</span><span class="s">"CVs (V): </span><span class="si">%</span><span class="s">s"</span><span class="o">%</span><span class="n">cvsV</span><span class="p">)</span>
</code></pre></div></div> <p><a name="3"></a> <br /><br /></p> <hr /> <h1 id="3-creating-curve--primitive-1">3. Creating Curve &amp; Primitive</h1> <p>Using <a href="https://help.autodesk.com/cloudhelp/2018/ENU/Maya-Tech-Docs/CommandsPython/curve.html">cmds.curve()</a> to create curve.</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cmds</span><span class="o">.</span><span class="n">curve</span><span class="p">(</span><span class="n">degree</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="p">[(</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mf">0.5</span><span class="p">,</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">0</span><span class="p">)])</span>
</code></pre></div></div> <p>Using <a href="https://download.autodesk.com/global/docs/maya2012/en_us/CommandsPython/polyCreateFacet.html">cmds.polyCreateFacet()</a> to create polygon faces.</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create a triangular facet</span>
<span class="n">cmds</span><span class="o">.</span><span class="n">polyCreateFacet</span><span class="p">(</span> <span class="n">p</span><span class="o">=</span><span class="p">[(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)]</span> <span class="p">)</span>

<span class="c"># Create a quadrangular facet with two triangular holes inside</span>
<span class="c"># Note that, in Python, specifying an empty tuple in the point list marks the</span>
<span class="c"># beginning of a hole specification</span>
<span class="n">cmds</span><span class="o">.</span><span class="n">polyCreateFacet</span><span class="p">(</span> <span class="n">p</span><span class="o">=</span><span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span> <span class="p">)</span>
<span class="n">cmds</span><span class="o">.</span><span class="n">move</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="bp">True</span> <span class="p">)</span>

</code></pre></div></div> <p>An example of create a tetrahedron by using <a href="https://download.autodesk.com/us/maya/2011help/CommandsPython/polyAppend.html">cmds.append()</a> to append faces, <a href="https://download.autodesk.com/us/maya/2011help/CommandsPython/polyUnite.html">cmds.polyUnite()</a> to combine faces, [cmd.polyMergeVertex()] to merge vertices, <a href="https://download.autodesk.com/us/maya/2011help/CommandsPython/move.html">cmds.move()</a> to move the points, [cmds.xform()] to transform the pivot of the object, finally using <a href="https://download.autodesk.com/us/maya/2011help/CommandsPython/makeIdentity.html">cmds.makeIdentity()</a> to freeze transformation, and using <a href="https://download.autodesk.com/us/maya/2009help/CommandsPython/delete.html">cmds.delete()</a> to delete construction history.</p> <p><br /></p> <h3 id="full-code">Full Code:</h3> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">maya</span> <span class="kn">import</span> <span class="n">cmds</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="k">def</span> <span class="nf">makeTetra</span><span class="p">(</span><span class="n">size</span><span class="p">):</span>
  <span class="n">pointA</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
  <span class="n">pointB</span> <span class="o">=</span> <span class="p">[</span><span class="n">size</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
  
  <span class="n">pointC</span> <span class="o">=</span> <span class="p">[</span><span class="n">size</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
  
  <span class="c"># set the z position for C</span>
  <span class="n">pointC</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">size</span><span class="o">*</span><span class="n">size</span><span class="p">)</span><span class="o">-</span><span class="p">(</span><span class="n">size</span><span class="o">/</span><span class="mi">2</span><span class="o">*</span><span class="n">size</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span>
  
  <span class="n">pointE</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
  <span class="c">#average the A, B, and C to get E</span>
  <span class="c"># add all the values</span>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">):</span>
    <span class="n">pointE</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+=</span><span class="n">pointA</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">pointE</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+=</span><span class="n">pointB</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">pointE</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+=</span><span class="n">pointC</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
  <span class="c"># divide by 3</span>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">):</span>
    <span class="n">pointE</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">pointE</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">/</span><span class="mf">3.0</span>
 
	<span class="c"># start point D with the X and Z coordinates of pointE</span>
  <span class="n">pointD</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
  <span class="n">pointD</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">pointE</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
  <span class="n">pointD</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">pointE</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
  
  <span class="n">distanceAE</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">pointE</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">pointE</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="p">(</span><span class="n">pointE</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="n">pointE</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
  
  <span class="c"># set the Y coordinate of point D</span>
  <span class="n">pointD</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">size</span><span class="o">*</span><span class="n">size</span><span class="o">-</span><span class="n">distanceAE</span><span class="o">*</span><span class="n">distanceAE</span><span class="p">)</span>
  
  <span class="n">faces</span><span class="o">=</span><span class="p">[]</span>
  <span class="n">faces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cmds</span><span class="o">.</span><span class="n">polyCreateFacet</span><span class="p">(</span><span class="n">p</span><span class="o">=</span><span class="p">[</span><span class="n">pointA</span><span class="p">,</span><span class="n">pointB</span><span class="p">,</span><span class="n">pointC</span><span class="p">],</span><span class="n">texture</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
  <span class="n">faces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cmds</span><span class="o">.</span><span class="n">polyCreateFacet</span><span class="p">(</span><span class="n">p</span><span class="o">=</span><span class="p">[</span><span class="n">pointA</span><span class="p">,</span><span class="n">pointD</span><span class="p">,</span><span class="n">pointB</span><span class="p">],</span><span class="n">texture</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
  <span class="n">faces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cmds</span><span class="o">.</span><span class="n">polyCreateFacet</span><span class="p">(</span><span class="n">p</span><span class="o">=</span><span class="p">[</span><span class="n">pointB</span><span class="p">,</span><span class="n">pointD</span><span class="p">,</span><span class="n">pointC</span><span class="p">],</span><span class="n">texture</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
  <span class="n">faces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cmds</span><span class="o">.</span><span class="n">polyCreateFacet</span><span class="p">(</span><span class="n">p</span><span class="o">=</span><span class="p">[</span><span class="n">pointC</span><span class="p">,</span><span class="n">pointD</span><span class="p">,</span><span class="n">pointA</span><span class="p">],</span><span class="n">texture</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
  
  <span class="n">cmds</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">faces</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">replace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">faces</span><span class="p">)):</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">faces</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">add</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
  
  <span class="c"># combine all the faces into a single object</span>
  <span class="n">obj</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">polyUnite</span><span class="p">()</span>
  
  <span class="c"># merge duplicated vertices</span>
  <span class="n">cmds</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s">".vtx[:]"</span><span class="p">)</span>
  <span class="n">cmds</span><span class="o">.</span><span class="n">polyMergeVertex</span><span class="p">(</span><span class="n">distance</span><span class="o">=</span><span class="mf">0.0001</span><span class="p">)</span>
  <span class="n">cmds</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
  
  <span class="c"># move the object to the center</span>
  <span class="n">cmds</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="o">-</span><span class="n">pointE</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="n">pointE</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
  <span class="c"># move the pivot of the object</span>
  <span class="n">cmds</span><span class="o">.</span><span class="n">xform</span><span class="p">(</span><span class="n">pivots</span><span class="o">=</span><span class="p">(</span><span class="n">pointE</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="mi">0</span><span class="p">,</span><span class="n">pointE</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
  <span class="c"># freeze transformation</span>
  <span class="n">cmds</span><span class="o">.</span><span class="n">makeIdentity</span><span class="p">(</span><span class="nb">apply</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
  
  <span class="c"># delete construction history</span>
  <span class="n">cmds</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">ch</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">makeTetra</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</code></pre></div></div> <h3 id="final-result">Final Result:</h3> <p align="center"> <img src="/static/assets/img/blog/tetrahedron.png" width="50%" /> </p> <hr /> <blockquote> <p><strong>End –Cheng Gu</strong></p> </blockquote> </div> <hr> <div class="row"> <div class="col-md-6"> <h5 style="display: inline;">Tags:</h5> </div> <div class="col-md-6"> <div class="small text-right"> <div> </div> </div> </div> </div> <br> <div class="row"> <div class="col-lg-12"> <!-- donate --> <br> <!-- share --> <div class="a2a_kit a2a_kit_size_32 a2a_default_style"> <a class="a2a_dd" href="https://www.addtoany.com/share"></a> <a class="a2a_button_facebook"></a> <a class="a2a_button_twitter"></a> <a class="a2a_button_google_plus"></a> <a class="a2a_button_linkedin"></a> <a class="a2a_button_email"></a> <a class="a2a_button_wechat"></a> <a class="a2a_button_sina_weibo"></a> <a class="a2a_button_pocket"></a> </div> <script> var a2a_config = a2a_config || {}; a2a_config.color_main = "D7E5ED"; a2a_config.color_border = "AECADB"; a2a_config.color_link_text = "333333"; a2a_config.color_link_text_hover = "333333"; </script> <script async src="https://static.addtoany.com/menu/page.js"></script> <br> <!-- comment --> </div> </div> </div> </div> </div> </div> </div> <!-- Google analytics --> <!-- GrowingIO --> </body> </html>
