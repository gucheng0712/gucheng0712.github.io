<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1 maximum-scale=1; minimum-scale=1; user-scalable=no;"> <meta name="author" content="ChengGu"> <meta name="baseurl" content=""> <title> Suzuka Site|Rendering Pipeline (CG) </title> <!-- favicon --> <link rel="shortcut icon" href="/static/assets/img/favicon.ico"> <!-- Main CSS --> <link href="/static/assets/app-20180125.min.css" rel="stylesheet"> <link href="/static/css/custom.css" rel="stylesheet"> <!-- Main Scripts --> <script src="/static/assets/app-20180125.min.js"></script> <script src="/static/assets/blog-20180125.min.js"></script> <!-- Google AdSense --> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <script> (adsbygoogle = window.adsbygoogle || []).push({ google_ad_client: "ca-pub-6196184668650108", enable_page_level_ads: true }); </script> </head> <body id="page-top" class="landing-page"> <div class="search-tool" style="position: fixed; top: 0px ; bottom: 0px; left: 0px; right: 0px; opacity: 0.95; background-color: #111111; z-index: 9999; display: none;"> <input type="text" class="form-control search-content" id="search-content" style="position: fixed; top: 60px" placeholder="Search Blog"> <div style="position: fixed; top: 16px; right: 16px; z-index: 9999;"> <img src=" /static/assets/img/search/cb-close.png " id="close-btn" /> </div> </div> <div style="position: fixed; right: 16px; bottom: 20px; z-index: 9999;"> <img src=" /static/assets/img/search/cb-search.png " id="search-btn" title="Double click Ctrl" /> </div> <div class="navbar-wrapper"> <nav class="navbar navbar-default navbar-fixed-top" role="navigation"> <div class="container"> <div class="navbar-header page-scroll"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href=" / ">Suzuka Site</a> </div> <div id="navbar" class="navbar-collapse collapse"> <ul class="nav navbar-nav navbar-right"> <li><a class="page-scroll" href=" blog/ "></a></li> <li> <a class="page-scroll" href="/blog/">Blog</a></li> <li> <a class="page-scroll" href="/unity/">Unity</a></li> <li> <a class="page-scroll" href="/ai/">AI</a></li> <li> <a class="page-scroll" href="/cg/">CG</a></li> <li> <a class="page-scroll" href="/math/">Math</a></li> <li> <a class="page-scroll" href="/data structure/">Data Structure</a></li> <li> <a class="page-scroll" href="/csharp/">C#</a></li> <li> <a class="page-scroll" href="/python/">Python</a></li> <li> <a class="page-scroll" href="/javascript/">JavaScript</a></li> <li> <a class="page-scroll" href="/dev journal/">Dev Journal</a></li> </ul> </div> </div> </nav> </div> <!--<link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css'>--> <!--<link rel="stylesheet" href="static/css/carousel_style.css">--> <!--<script src="static/js/carousel.js"></script>--> <div id="carouselHacked" class="carousel slide carousel-fade" data-ride="carousel"> <div class="carousel-inner" role="listbox"> <div class="item active"> <!-- Set background for slide in css --> <div class="header-back" style="background-image: url(/static/assets/img/landing/header_1.jpg);" title="first banner image"> </div> </div> <div class="item"> <div class="header-back" style="background-image: url(/static/assets/img/landing/header_2.jpg);" title=""> </div> </div> <div class="item"> <div class="header-back" style="background-image: url(/static/assets/img/landing/header_3.jpg);" title="third banner image"> </div> </div> <div class="item"> <div class="header-back" style="background-image: url(/static/assets/img/landing/header_4.jpg);" title="fourth banner image"> </div> </div> <div class="item"> <div class="header-back" style="background-image: url(/static/assets/img/landing/header_5.jpg);" title="fifth banner image"> </div> </div> <div class="item"> <div class="header-back" style="background-image: url(/static/assets/img/landing/header_6.jpg);" title="sixth banner image"> </div> </div> </div> <!-- Controls --> <a class="left carousel-control" href="#carouselHacked" role="button" data-slide="prev"> <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span> <span class="sr-only">Previous</span> </a> <a class="right carousel-control" href="#carouselHacked" role="button" data-slide="next"> <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> <span class="sr-only">Next</span> </a> </div> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']], processEscapes: true } }); </script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script> <div class="wrapper wrapper-content animated fadeInRight article"> <div class="row"> <div class="col-lg-10 col-lg-offset-1"> <div class="ibox"> <div class="ibox-content"> <div class="pull-right"> <a class="btn btn-white btn-xs" href="/cg">Cg</a> </div> <div class="text-center article-title"> <span class="text-muted"><i class="fa fa-clock-o"></i> 14 Sep 2018</span> <h1> Rendering Pipeline (CG) </h1> </div> <div class="ibox-postpadding"> <h1 id="table-of-contents">Table of Contents</h1> <ol> <li><a href="#example">Example</a></li> <li><a href="#example2">Example2</a></li> <li><a href="#third-example">Third Example</a></li> </ol> <p>The pipeline of Graphic Rendering includes <code class="highlighter-rouge">3</code> stages: <strong><em><code class="highlighter-rouge">Application Stage</code></em></strong> –&gt; <strong><em><code class="highlighter-rouge">Geometry Stage</code></em></strong> –&gt; <strong><em><code class="highlighter-rouge">Rasterization Stage</code></em></strong>.</p> <p align="center"> <img src="/static/assets/img/blog/RenderingPipeline.png" width="70%" /> </p> <hr /> <h2 id="1-application-stage"><strong>1. Application Stage</strong></h2> <p>The start point of the rendering pipeline is CPU. In the <code class="highlighter-rouge">Application Stage</code>, the most important <code class="highlighter-rouge">output</code> is the <code class="highlighter-rouge">geometry infomation</code> which need to be rendered, called <code class="highlighter-rouge">Rendering Primitives</code>.</p> <blockquote> <p>In this Stage, the developer has <code class="highlighter-rouge">3 Tasks</code>:</p> </blockquote> <ol> <li> <p>Prepare the <code class="highlighter-rouge">environment and camera's position</code>. How many <code class="highlighter-rouge">models</code> are used in the environment, and which kinds of <code class="highlighter-rouge">light</code> sources are used in the scene.</p> </li> <li> <p>In order to improve the performance of rendering, need to do the work of <code class="highlighter-rouge">Culling</code>, to get rid of unnecessary rendering process.</p> </li> <li> <p>Need to <code class="highlighter-rouge">set up the rendering state</code> of each model, such as the materials , textures, shaders.</p> </li> <li> <p>CPU will call <strong><em><code class="highlighter-rouge">DrawCall()</code></em></strong> to make GPU draw stuff on screen.</p> </li> </ol> <blockquote> <p>For example:</p> </blockquote> <p align="center"> <img src="/static/assets/img/blog/applicationStage.png" width="70%" /> </p> <hr /> <h2 id="2-geometry-stage"><strong>2. Geometry Stage</strong></h2> <p>In <code class="highlighter-rouge">Geometry Stage</code>, the GPU will do the <code class="highlighter-rouge">vertex operation</code> through the received vertex data from the CPU.</p> <p align="center"> <img src="/static/assets/img/blog/GeometryStage.png" width="70%" /> </p> <blockquote> <p>The Process:</p> </blockquote> <ol> <li> <p><code class="highlighter-rouge">Vertex Shader</code>: <code class="highlighter-rouge">programmable</code> , it is usually used to <strong>implement vertex space transformation, vertex shading and other functions.</strong></p> </li> <li> <p><code class="highlighter-rouge">Tesselation Shader</code>: An <code class="highlighter-rouge">optional</code> shader for <strong>subdividing primitives (primitives are the basic units that make up an image, such as points, lines, surfaces, etc.).</strong></p> </li> <li> <p><code class="highlighter-rouge">Geometry Shader</code>: An <code class="highlighter-rouge">optional</code> shader for <strong>polygon shading operations</strong>.</p> </li> <li> <p><code class="highlighter-rouge">Clipping</code>: this phase is <code class="highlighter-rouge">configurable</code>. The goal of this phase is to <strong>trim away the vertices that are not in the camera’s field of view and to remove the facets of certain trig elements.</strong></p> </li> <li> <p><code class="highlighter-rouge">Screen Mapping</code>: This stage is <code class="highlighter-rouge">not configurable</code> and is <code class="highlighter-rouge">not programmatic</code>; it is responsible for <strong>converting the coordinates of each pixel to the screen coordinate system.</strong></p> </li> </ol> <blockquote> <p><strong>Meaning of_MVP (Model View Projection):</strong></p> </blockquote> <p>The <strong><em><code class="highlighter-rouge">vertices</code></em></strong> of a model are stored in the <strong><em><code class="highlighter-rouge">Object Space</code></em></strong>. The <strong><em><code class="highlighter-rouge">position</code></em></strong> and the <strong><em><code class="highlighter-rouge">orientation</code></em></strong> of each model are stored in <strong><em><code class="highlighter-rouge">World Space</code></em></strong>.</p> <p>Before an object can be rendered, its vertices must be transformed into the <strong><em><code class="highlighter-rouge">Camera Space</code></em></strong> (also called View Space).</p> <p>It is possible to transform vertices from object space directly into camera space by concatenating the matrices representing the transformations from object space to world space and from world space to camera space. The product of these transformations is called the <strong><em><code class="highlighter-rouge">Model-View Trasnformation</code></em></strong>. Once a model’s vertices have been transformed into camera space, they will also do a projection transformation to apply <strong><em><code class="highlighter-rouge">Perspective</code></em></strong> <em>(the geometry becomes smaller as the distance from the camera increases).</em></p> <hr /> <h2 id="3-rasterization-stage"><strong>3. Rasterization Stage</strong></h2> <p>In <code class="highlighter-rouge">Rasterization Stage</code>, GPU will use the data passed in the previous stage(Geometry stage) to <code class="highlighter-rouge">produce pixels</code> on the screen and render the final image.</p> <p align="center"> <img src="/static/assets/img/blog/RasterizationStage.png" width="100%" /> </p> <blockquote> <p>The Process:</p> </blockquote> <ol> <li> <p><strong><em><code class="highlighter-rouge">Triangle Setup</code></em></strong>: Calculating the <strong>Differences</strong> in triangular surfaces and other relevant data. complete fixed <strong>hardware operations</strong>.</p> </li> <li> <p><strong><em><code class="highlighter-rouge">Triangle Traversal</code></em></strong>: This stage <strong>checks</strong> whether each pixel is inside a triangle, and fragment is generated at this stage. <strong>Interpolation</strong> is usually used.</p> </li> <li> <p><strong><em><code class="highlighter-rouge">Fragment Shader</code></em></strong>: Fully <strong><em><code class="highlighter-rouge">programmable</code></em></strong>. Use interpolated shading data as input and output one or more color values for the next phase. At this stage, GPU execution can be controlled by programming. The most commonly used technology in this stage is texture technology.</p> </li> <li> <p><strong><em><code class="highlighter-rouge">Per-Fragment Operation</code></em></strong>: The <code class="highlighter-rouge">Color value</code> for each pixel is <code class="highlighter-rouge">stored</code> in the <code class="highlighter-rouge">Color Buffer</code> and <code class="highlighter-rouge">merged</code> at this stage. This stage is <code class="highlighter-rouge">not completely programmable</code>, but can be configured to produce different effects. In detail includes:</p> <ul> <li> <p><strong><em><code class="highlighter-rouge">The pixel ownership</code></em></strong> (the only one <code class="highlighter-rouge">can't be disabled</code>): it simply determines whether a fragment lies in the region of the viewport that is currently visible on the display.</p> </li> <li> <p><strong><em><code class="highlighter-rouge">Scissor Test</code></em></strong>: An application may <code class="highlighter-rouge">specify a rectangle in the viewport</code>, called the scissor rectangle, to which rendering should be restricted. Any fragments falling outside the scissor rectangle are discarded.</p> </li> <li> <p><strong><em><code class="highlighter-rouge">Alpha Test</code></em></strong>: When the final color of a fragment is calculated, an application may also calculate an alpha value that usually represents the degree of transparency associated with the fragment. <strong><em>The alpha test compares the final alpha value of a fragment to a constant value that is preset by the application.</em></strong> The application can specifies what relationship between the two values (such as less than, greater than, or equal to) causes the test to pass. If the relationship is not satisfied, then the fragment is discarded.</p> </li> <li> <p><strong><em><code class="highlighter-rouge">Stencil Test</code></em></strong>: The stencil test reads the value <code class="highlighter-rouge">stored in the stencil buffer</code> at a fragment’s location and compares it to a value previously specified by the application. <strong><em>The stencil test passes only if a specific relationship is satisfied (e.g., the stencil value is equal to a particular value); otherwise, the stencil test fails, and the fragment is discarded.</em></strong></p> </li> <li> <p><strong><em><code class="highlighter-rouge">Depth Test</code></em></strong>: The depth Test compares the <code class="highlighter-rouge">final depth</code> associated with a fragment to the <code class="highlighter-rouge">value</code> currently <code class="highlighter-rouge">stored</code> in the <code class="highlighter-rouge">depth buffer</code>.</p> </li> <li> <p><strong><em><code class="highlighter-rouge">Blending</code></em></strong>: Once the pixel ownership test, scissor test, alpha test, stencil test, and depth test have all passed, a fragment’s final color is blended into the <strong><em><code class="highlighter-rouge">image buffer</code></em></strong>. <strong><em>The blending operation calculates a new color by combining the fragment’s final color and the color already stored in the image buffer at the fragment’s location.</em></strong> The fragment’s alpha value and the alpha value stored in the image buffer may also be used to determine the color that ultimately appears in the viewport. <em>(The blending operation may be configured to simply replace the previous color in the image buffer, or it may produce special visual effects such as transparency.)</em></p> </li> </ul> </li> </ol> <hr /> <blockquote> <p><strong>End –Cheng Gu</strong></p> </blockquote> </div> <hr> <div class="row"> <div class="col-md-6"> <h5 style="display: inline;">Tags:</h5> <button class="btn btn-white btn-xs" type="button">CG</button> </div> <div class="col-md-6"> <div class="small text-right"> <div> </div> </div> </div> </div> <br> <div class="row"> <div class="col-lg-12"> <!-- donate --> <br> <!-- share --> <div class="a2a_kit a2a_kit_size_32 a2a_default_style"> <a class="a2a_dd" href="https://www.addtoany.com/share"></a> <a class="a2a_button_facebook"></a> <a class="a2a_button_twitter"></a> <a class="a2a_button_google_plus"></a> <a class="a2a_button_linkedin"></a> <a class="a2a_button_email"></a> <a class="a2a_button_wechat"></a> <a class="a2a_button_sina_weibo"></a> <a class="a2a_button_pocket"></a> </div> <script> var a2a_config = a2a_config || {}; a2a_config.color_main = "D7E5ED"; a2a_config.color_border = "AECADB"; a2a_config.color_link_text = "333333"; a2a_config.color_link_text_hover = "333333"; </script> <script async src="https://static.addtoany.com/menu/page.js"></script> <br> <!-- comment --> </div> </div> </div> </div> </div> </div> </div> <!-- Google analytics --> <!-- GrowingIO --> </body> </html>
