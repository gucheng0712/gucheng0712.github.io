<!DOCTYPE html> <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="stylesheet" type="text/css" href="/assets/css/materialize.css"> <link rel="stylesheet" type="text/css" href="/assets/main.css"> <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"> <link rel="stylesheet" href="https://cdn.rawgit.com/konpa/devicon/df6431e323547add1b4cf45992913f15286456d3/devicon.min.css"> <title>Suzuka Site</title> </head> <body> <div class="container"> <div class="col s10"> <div class="row" style="padding:10px;"> <a id="home" class="waves-effect waves-light btn white-text darken-2 grey z-depth-4" href="/#blog"><i class="material-icons">arrow_back</i></a> </div> <h3 class="post-title" itemprop="name headline" style="text-align:center">The Flag Attribute in Enumation</h3> <p class="post-meta"> <time datetime="2018-09-04T05:15:05-07:00" itemprop="datePublished"> Sep 4, 2018 </time> </p> <div class="post-content" itemprop="articleBody"> <p>The problem with enumation is when you want to use conditional operator in your statement, you have to use bit operator.</p> <p>For example, you can’t use <code class="highlighter-rouge">&amp;&amp;</code> or <code class="highlighter-rouge">||</code> operator, you have to use bit operator such as <code class="highlighter-rouge">&amp;</code> or <code class="highlighter-rouge">|</code>.</p> <blockquote> <p>Bit Operator</p> </blockquote> <table> <tbody> <tr> <td>Operation</td> <td>Description</td> </tr> <tr> <td><code class="highlighter-rouge">a &amp; b</code></td> <td>if a = b = 1, the result is 1, else is 0</td> </tr> <tr> <td><code class="highlighter-rouge">a | b</code></td> <td>if a and b as long as one of them is 1 then result is 1</td> </tr> <tr> <td><code class="highlighter-rouge">~a</code></td> <td>if a = 1, the result = 0; if a = 0, the result = 1</td> </tr> <tr> <td><code class="highlighter-rouge">a ^ b</code></td> <td>Only when a = b, the result is 0; if a != b, the result is 1</td> </tr> </tbody> </table> <hr/> <h4 id="1-normal-way-to-use-enum-in-c">1. Normal way to use enum in C#</h4> <p>if we want to create a new List Type. Ignore all other details, only focus on the iterator. This List will store the values in array, and this list can set the start point of the iteration. For example, we have 5 elements. We can set start index is 2, the iteration order shoule be 2,3,4,0,1.</p> <blockquote> <p>(1) create a enumation</p> </blockquote> <figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"> 
    <span class="k">public</span> <span class="k">enum</span> <span class="n">PersonType</span>
    <span class="p">{</span>
        <span class="n">Tall</span><span class="p">,</span>  
        <span class="n">Rich</span><span class="p">,</span>   
        <span class="n">Handsome</span><span class="p">,</span>   
        <span class="n">White</span><span class="p">,</span>
        <span class="n">Beauty</span>
    <span class="p">}</span></code></pre></figure> <blockquote> <p>(2) Declare the enum and use switch case to do condition statement:</p> </blockquote> <figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"> 
 <span class="k">public</span> <span class="k">static</span> <span class="n">PersonType</span> <span class="n">person</span><span class="p">;</span>
 <span class="p">{</span>
        <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">switch</span> <span class="p">(</span><span class="n">person</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">case</span> <span class="n">PersonType</span><span class="p">.</span><span class="n">Tall</span><span class="p">:</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"I'm Tall"</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="n">PersonType</span><span class="p">.</span><span class="n">Rich</span><span class="p">:</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"I'm Rich"</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="n">PersonType</span><span class="p">.</span><span class="n">Handsome</span><span class="p">:</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"I'm Handsome"</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="n">PersonType</span><span class="p">.</span><span class="n">White</span><span class="p">:</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"I'm White"</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="n">PersonType</span><span class="p">.</span><span class="n">Beauty</span><span class="p">:</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"I'm Beauty"</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">default</span><span class="p">:</span>
                    <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span></code></pre></figure> <hr/> <h4 id="2-problem">2. Problem</h4> <blockquote> <p>so far, it’s fine. However if you want to have multiply choice such as</p> </blockquote> <figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"> 
    <span class="k">case</span> <span class="n">PersonType</span><span class="p">.</span><span class="n">White</span> <span class="p">|</span> <span class="n">PersonType</span><span class="p">.</span><span class="n">Beauty</span><span class="p">:</span></code></pre></figure> <blockquote> <p>It is still fine. No error at all. Then we try one more choice:</p> </blockquote> <figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"> 
    <span class="k">case</span> <span class="n">PersonType</span><span class="p">.</span><span class="n">White</span> <span class="p">|</span> <span class="n">PersonType</span><span class="p">.</span><span class="n">Handsome</span><span class="p">:</span></code></pre></figure> <blockquote style="color: red"> <p>So now you will see an error! Why it will happen?</p> </blockquote> <hr/> <h4 id="3-solution">3. Solution</h4> <blockquote> <p>Because when we create an enum the default value of it is</p> </blockquote> <figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"> 
    <span class="k">public</span> <span class="k">enum</span> <span class="n">PersonType</span>
    <span class="p">{</span>
        <span class="n">Tall</span> <span class="p">=</span> <span class="m">0</span><span class="p">,</span>       <span class="c1">// 000000</span>
        <span class="n">Rich</span> <span class="p">=</span> <span class="m">1</span><span class="p">,</span>       <span class="c1">// 000001</span>
        <span class="n">Handsome</span> <span class="p">=</span> <span class="m">2</span><span class="p">,</span>   <span class="c1">// 000010   </span>
        <span class="n">White</span> <span class="p">=</span> <span class="m">3</span><span class="p">,</span>      <span class="c1">// 000011</span>
        <span class="n">Beauty</span> <span class="p">=</span> <span class="m">4</span>      <span class="c1">// 000100</span>
    <span class="p">}</span></code></pre></figure> <blockquote style="color: red"> <p>So when the condition is <code class="highlighter-rouge">PersonType.White | PersonType.Beauty</code>, the comparison actually is <code class="highlighter-rouge">000011 | 000100 -&gt; 000111</code>, there is no other duplicated address, so there is no error.</p> </blockquote> <blockquote> <p>However, when it comes to the comparison between <code class="highlighter-rouge">PersonType.White | PersonType.Handsome</code>, which actually is <code class="highlighter-rouge">000011 | 000010 -&gt; 000011</code>. <code class="highlighter-rouge">000011</code> already has another value which is <code class="highlighter-rouge">PersonType.White</code>, so it will give an error.</p> </blockquote> <blockquote> <p>So, how can we solve this problem?</p> </blockquote> <blockquote> <p>The right way is add a <code class="highlighter-rouge">[Flag]</code> Attributes, And Change the value to 2^n, so that they will never meet each other</p> </blockquote> <figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"> 
    <span class="k">public</span> <span class="k">enum</span> <span class="n">PersonType</span>
    <span class="p">{</span>
        <span class="n">Tall</span> <span class="p">=</span> <span class="m">1</span><span class="p">,</span>       <span class="c1">// 000001</span>
        <span class="n">Rich</span> <span class="p">=</span> <span class="m">2</span><span class="p">,</span>       <span class="c1">// 000010</span>
        <span class="n">Handsome</span> <span class="p">=</span> <span class="m">4</span><span class="p">,</span>   <span class="c1">// 000100   </span>
        <span class="n">White</span> <span class="p">=</span> <span class="m">8</span><span class="p">,</span>      <span class="c1">// 001000</span>
        <span class="n">Beauty</span> <span class="p">=</span> <span class="m">16</span>     <span class="c1">// 010000</span>
    <span class="p">}</span>
    
     <span class="k">public</span> <span class="k">static</span> <span class="n">PersonType</span> <span class="n">person</span><span class="p">;</span>
     <span class="p">{</span>
        <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">switch</span> <span class="p">(</span><span class="n">person</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">case</span> <span class="n">PersonType</span><span class="p">.</span><span class="n">Tall</span><span class="p">:</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"I'm Tall"</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="n">PersonType</span><span class="p">.</span><span class="n">Rich</span><span class="p">:</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"I'm Rich"</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="n">PersonType</span><span class="p">.</span><span class="n">Handsome</span><span class="p">:</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"I'm Handsome"</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="n">PersonType</span><span class="p">.</span><span class="n">White</span><span class="p">:</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"I'm White"</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="n">PersonType</span><span class="p">.</span><span class="n">Beauty</span><span class="p">:</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"I'm Beauty"</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                    
                <span class="c1">// 001000 | 010000 -&gt; 011000</span>
                <span class="k">case</span> <span class="n">PersonType</span><span class="p">.</span><span class="n">White</span> <span class="p">|</span> <span class="n">PersonType</span><span class="p">.</span><span class="n">Beauty</span><span class="p">:</span> 
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"I'm Beauty or white"</span><span class="p">);</span> 
                    <span class="k">break</span><span class="p">;</span>
                <span class="c1">// 001000 | 000100 -&gt; 001100</span>
                <span class="k">case</span> <span class="n">PersonType</span><span class="p">.</span><span class="n">White</span> <span class="p">|</span> <span class="n">PersonType</span><span class="p">.</span><span class="n">Handsome</span><span class="p">:</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"I'm white or handsome"</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">default</span><span class="p">:</span>
                    <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span></code></pre></figure> <hr/> <blockquote> <p><strong>End –Cheng Gu</strong></p> </blockquote> </div> </div> </div> <script type="text/javascript" src="/assets/js/jquery-3.2.1.min.js"></script> <script type="text/javascript" src="/assets/js/materialize.min.js"></script> <script src="/assets/js/init.js"></script> </body> <footer class="page-footer"> <div class="footer-copyright" style="padding-left: 30px"> <i class="material-icons" style="padding-right:5px">copyright</i> <p>2018 Copyright Cheng Gu</p> </div> </footer> </html>